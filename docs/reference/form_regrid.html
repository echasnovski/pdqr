<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Change grid of pdqr-function — form_regrid • pdqr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<meta property="og:title" content="Change grid of pdqr-function — form_regrid" />

<meta property="og:description" content="Modify grid of pdqr-function (rows of &quot;x_tbl&quot; metadata) to
increase (upgrid) or decrease (downgrid) granularity using method of choice.
Upgridding might be useful in order to obtain more information during certain
type of transformations. Downgridding might be useful for decreasing amount
of used memory for storing pdqr-function without losing much information." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pdqr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pdqr-01-create.html">Create pdqr-functions with `new_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-02-convert.html">Convert pdqr-functions with `as_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-03-transform.html">Transform pdqr-functions with `form_*()` and base operations</a>
    </li>
    <li>
      <a href="../articles/pdqr-04-summarize.html">Summarize pdqr-functions with `summ_*()`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/pdqr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Change grid of pdqr-function</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/pdqr/blob/master/R/form_regrid.R'><code>R/form_regrid.R</code></a></small>
    <div class="hidden name"><code>form_regrid.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Modify grid of pdqr-function (rows of <a href='meta.html'>"x_tbl" metadata</a>) to
increase (upgrid) or decrease (downgrid) granularity using method of choice.
Upgridding might be useful in order to obtain more information during certain
type of transformations. Downgridding might be useful for decreasing amount
of used memory for storing pdqr-function without losing much information.</p>
    
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>form_regrid</span>(<span class='no'>f</span>, <span class='no'>n_grid</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"x"</span>)</code></pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>f</th>
      <td><p>A pdqr-function.</p></td>
    </tr>
    <tr>
      <th>n_grid</th>
      <td><p>A desired number of grid elements in output.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Regrid method. Should be one of "x" or "q".</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A pdqr-function with modified grid.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The goal here is to create pdqr-function which is reasonably similar
to <code>f</code> and has <code>n_grid</code> rows in "x_tbl" metadata.</p>
<p>General algorithm of regridding is as follows:</p><ul>
<li><p><strong>Compute reference grid</strong>. For method "x" it is a sequence of equidistant
points between edges of <code>f</code>'s <a href='meta.html'>support</a>. For method "q" -
sequence of quantiles for equidistant probabilities from 0 to 1. Lengths of
reference grids for both methods are <code>n_grid</code>.</p></li>
<li><p><strong>Adjust <code>f</code>'s grid to reference one</strong>. This is done depending on <code>f</code>'s
<a href='meta.html'>type</a> and which kind or regridding is done (upgridding is the
case when <code>n_grid</code> is strictly more than number of rows in "x_tbl" metadata,
downgridding - when it is strictly less):</p><ul>
<li><p>Type "discrete":</p><ul>
<li><p>UPgridding "discrete" functions is not possible as it is assumed
that input "discrete" functions can't have any "x" values other then
present ones. In this case input is returned, the only case when
output doesn't have desired <code>n_grid</code> rows in "x_tbl" metadata.</p></li>
<li><p>DOWNgridding "discrete" functions is done by computing nearest
match of reference grid to <code>f</code>'s one and collapsing (by summing
probabilities) all "x" values from input to the nearest matched ones.
Here "computing nearest match" means that every element of reference
grid is one-one matched with subset of unique values from <code>f</code>'s "x"
elements. Matching is done in greedy iterative fashion in order to
minimize total distance between reference grid and matched subset.
<strong>Note</strong> that this can result in not optimal (with not minimum total
distance) match and can take a while to compute in some cases.</p></li>
</ul></li>
<li><p>Type "continuous":</p><ul>
<li><p>UPgridding "continuous" functions is done by adding rows to "x_tbl"
metadata with "x" values equal to those elements of reference grid
which are the furthest away from input "x" grid as a set. Distance
from point to set is meant as minimum of distances between point and
all points of set. Values of "y" and "cumprob" columns are taken as
values of corresponding to <code>f</code> d- and p-functions.</p></li>
<li><p>DOWNgridding "continuous" functions is done by computing nearest
match of reference grid to <code>f</code>'s one (as for "discrete" type) and
removing all unmatched rows from "x_tbl" metadata.</p></li>
</ul></li>
</ul></li>
</ul>
    <p>Special cases of <code>n_grid</code>:</p><ul>
<li><p>If <code>n_grid</code> is the same as number of rows in "x_tbl" metadata, then input
<code>f</code> is returned.</p></li>
<li><p>If <code>n_grid</code> is 1, appropriate <code>new_*()</code> function is used with single
numeric input equal to distribution's median.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='form_resupport.html'>form_resupport()</a></code> for changing support of pdqr-function.</p>
<p><code><a href='form_retype.html'>form_retype()</a></code> for changing type of pdqr-function.</p>
<p>Other form functions: <code><a href='form_estimate.html'>form_estimate</a></code>,
  <code><a href='form_mix.html'>form_mix</a></code>, <code><a href='form_resupport.html'>form_resupport</a></code>,
  <code><a href='form_retype.html'>form_retype</a></code>, <code><a href='form_smooth.html'>form_smooth</a></code>,
  <code><a href='form_tails.html'>form_tails</a></code>, <code><a href='form_trans.html'>form_trans</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='co'># Type "discrete"</span>
<span class='no'>d_dis</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='new-pdqr.html'>new_d</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>/<span class='fl'>55</span>), <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"discrete"</span>)

  <span class='co'># Downgridding</span>
<span class='fu'><a href='meta.html'>meta_x_tbl</a></span>(<span class='fu'>form_regrid</span>(<span class='no'>d_dis</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>4</span>))</div><div class='output co'>#&gt;    x       prob    cumprob
#&gt; 1  1 0.05454545 0.05454545
#&gt; 2  4 0.21818182 0.27272727
#&gt; 3  7 0.38181818 0.65454545
#&gt; 4 10 0.34545455 1.00000000</div><div class='input'><span class='fu'><a href='meta.html'>meta_x_tbl</a></span>(<span class='fu'>form_regrid</span>(<span class='no'>d_dis</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"q"</span>))</div><div class='output co'>#&gt;    x      prob   cumprob
#&gt; 1  1 0.1090909 0.1090909
#&gt; 2  6 0.4000000 0.5090909
#&gt; 3  9 0.3090909 0.8181818
#&gt; 4 10 0.1818182 1.0000000</div><div class='input'>
  <span class='co'># Upgridding for "discrete" type isn't possible. Input is returned</span>
<span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span>(<span class='no'>d_dis</span>, <span class='fu'>form_regrid</span>(<span class='no'>d_dis</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>100</span>))</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Type "continuous"</span>
  <span class='co'># Downgridding</span>
<span class='no'>d_norm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as-pdqr.html'>as_d</a></span>(<span class='no'>dnorm</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='no'>d_norm</span>)</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span>(<span class='fu'>form_regrid</span>(<span class='no'>d_norm</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>10</span>), <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"blue"</span>)</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/lines.html'>lines</a></span>(<span class='fu'>form_regrid</span>(<span class='no'>d_norm</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"q"</span>), <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"green"</span>)</div><div class='img'><img src='form_regrid-1.png' alt='' width='700' height='433' /></div><div class='input'>
  <span class='co'># Upgridding</span>
<span class='no'>d_con</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='new-pdqr.html'>new_d</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>0.5</span>, <span class='fl'>3</span>)), <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"continuous"</span>)
<span class='fu'><a href='meta.html'>meta_x_tbl</a></span>(<span class='fu'>form_regrid</span>(<span class='no'>d_con</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>6</span>))</div><div class='output co'>#&gt;     x   y cumprob
#&gt; 1 1.0 0.5     0.0
#&gt; 2 1.4 0.5     0.2
#&gt; 3 2.0 0.5     0.5
#&gt; 4 2.2 0.5     0.6
#&gt; 5 2.6 0.5     0.8
#&gt; 6 3.0 0.5     1.0</div><div class='input'>
<span class='co'># Pdqr-function with center at median is returned in case `n_grid` is 1</span>
<span class='fu'>form_regrid</span>(<span class='no'>d_dis</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; Probability mass function of discrete type
#&gt; Support: [7, 7] (1 element)</div><div class='input'>  <span class='co'># Dirac-like function is returned</span>
<span class='fu'>form_regrid</span>(<span class='no'>d_con</span>, <span class='kw'>n_grid</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; Density function of continuous type
#&gt; Support: ~[2, 2] (2 intervals)</div><div class='input'>
</div></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



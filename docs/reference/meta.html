<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get metadata of pdqr-function — meta • pdqr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Get metadata of pdqr-function — meta" />
<meta property="og:description" content="Tools for getting metadata of pdqr-function: a function which represents
distribution with finite support and finite values of probability/density.
The key metadata which defines underline distribution is &quot;x_tbl&quot;. If two
pdqr-functions have the same &quot;x_tbl&quot; metadata, they represent the same
distribution and can be converted to one another with as_*() family of
functions." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pdqr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pdqr-01-create.html">Create pdqr-functions with `new_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-02-convert.html">Convert pdqr-functions with `as_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-03-transform.html">Transform pdqr-functions with `form_*()` and base operations</a>
    </li>
    <li>
      <a href="../articles/pdqr-04-summarize.html">Summarize pdqr-functions with `summ_*()`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/pdqr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get metadata of pdqr-function</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/pdqr/blob/master/R/meta.R'><code>R/meta.R</code></a></small>
    <div class="hidden name"><code>meta.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Tools for getting metadata of <strong>pdqr-function</strong>: a function which represents
distribution with finite support and finite values of probability/density.
The key metadata which defines underline distribution is <strong>"x_tbl"</strong>. If two
pdqr-functions have the same "x_tbl" metadata, they represent the same
distribution and can be converted to one another with <code>as_*()</code> family of
functions.</p>
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>meta_all</span>(<span class='no'>f</span>)

<span class='fu'>meta_class</span>(<span class='no'>f</span>)

<span class='fu'>meta_type</span>(<span class='no'>f</span>)

<span class='fu'>meta_support</span>(<span class='no'>f</span>)

<span class='fu'>meta_x_tbl</span>(<span class='no'>f</span>)</code></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>f</th>
      <td><p>A pdqr-function.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>meta_all()</code> returns a list of all metadata. <code>meta_class()</code>,
<code>meta_type()</code>, <code>meta_support</code>, and <code>meta_x_tbl()</code> return corresponding
metadata.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Internally storage of metadata is implemented as follows:</p><ul>
<li><p>Pdqr class is a first "appropriate" ("p", "d", "q", or "r") S3 class of
pdqr-function. All "proper" pdqr-functions have full S3 class of the form:
<code><a href='https://rdrr.io/r/base/c.html'>c(cl, "pdqr", "function")</a></code>, where <code>cl</code> is pdqr class.</p></li>
<li><p>Pdqr type, support, and "x_tbl" are stored into function's
<a href='https://rdrr.io/r/base/environment.html'>environment</a>.</p></li>
</ul>

    <h2 class="hasAnchor" id="pdqr-class"><a class="anchor" href="#pdqr-class"></a>Pdqr class</h2>

    


<p>Pdqr class is returned by <code>meta_class()</code>. This can be one of "p", "d", "q",
"r". Represents <strong>how pdqr-function describes underlying distribution</strong>:</p><ul>
<li><p>P-function (i.e. of class "p") returns value of cumulative distribution
function (probability of random variable being not more than certain value)
at points <code>q</code> (its numeric vector input). Internally it is implemented as
direct integration of corresponding (with the same "x_tbl" metadata)
d-function.</p></li>
<li><p>D-function returns value of probability mass or density function (depending
on pdqr type) at points <code>x</code> (its numeric vector input). Internally it is
implemented by directly using "x_tbl" metadata (see section '"x_tbl"
metadata' for more details).</p></li>
<li><p>Q-function returns value of quantile function at points <code>p</code> (its numeric
vector input). Internally it is implemented as inverse of corresponding
p-function (returns the smallest "x" value which has cumulative probability
not less than input).</p></li>
<li><p>R-function generates random sample of size <code>n</code> (its single number input)
from distribution. Internally it is implemented using inverse transform
sampling: certain amount of points from <a href='https://rdrr.io/r/stats/Uniform.html'>standard uniform distribution</a> is generated, and the output is values of
corresponding q-function at generated points.</p></li>
</ul>

<p>These names are chosen so as to follow <a href='https://rdrr.io/r/stats/Distributions.html'>base R convention</a> of naming distribution functions. All
pdqr-functions take only one argument with the same meaning as the first ones
in base R. It has no other arguments specific to some parameters of
distribution family. To emulate their other common arguments, use the
following transformations (here <code>d_f</code> means a function of class "d", etc.):</p><ul>
<li><p>For <code>d_f(x, log = TRUE)</code> use <code><a href='https://rdrr.io/r/base/Log.html'>log(d_f(x))</a></code>.</p></li>
<li><p>For <code>p_f(q, lower.tail = FALSE)</code> use <code>1 - p_f(q)</code>.</p></li>
<li><p>For <code>p_f(q, log.p = TRUE)</code> use <code><a href='https://rdrr.io/r/base/Log.html'>log(p_f(q))</a></code>.</p></li>
<li><p>For <code>q_f(p, lower.tail = FALSE)</code> use <code>q_f(1 - p)</code>.</p></li>
<li><p>For <code>q_f(p, log.p = TRUE)</code> use <code>q_f(exp(p))</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="pdqr-type"><a class="anchor" href="#pdqr-type"></a>Pdqr type</h2>

    


<p>Pdqr type is returned by <code>meta_type()</code>. This can be one of "discrete" or
"continuous". Represents <strong>type of underlying distribution</strong>:</p><ul>
<li><p>Type "discrete" is used for distributions with finite number of outcomes.
Functions with "discrete" type has a fixed set of "x" values ("x" column in
"x_tbl" metadata) on which d-function returns possibly non-zero output
(values from "prob" column in "x_tbl" metadata).</p></li>
<li><p>Type "continuous" is used to represent continuous distributions with
piecewise-linear density with finite values and on finite support. Density
goes through points defined by "x" and "y" columns in "x_tbl" metadata.</p></li>
</ul>

    <h2 class="hasAnchor" id="pdqr-support"><a class="anchor" href="#pdqr-support"></a>Pdqr support</h2>

    

<p>Pdqr support is returned by <code>meta_support()</code>. This is a numeric vector with
two finite values. Represents <strong>support of underlying distribution</strong>: closed
interval, outside of which d-function is equal to zero. <strong>Note</strong> that inside
of support d-function can also be zero, which especially true for "discrete"
functions.</p>
<p>Technically, pdqr support is range of values from "x" column of "x_tbl"
metadata.</p>
    <h2 class="hasAnchor" id="-x-tbl-metadata"><a class="anchor" href="#-x-tbl-metadata"></a>"x_tbl" metadata</h2>

    


<p>Metadata "x_tbl" is returned by <code>meta_x_tbl()</code>. This is a key metadata which
<strong>completely defines distribution</strong>. It is a data frame with three numeric
columns, content of which partially depends on pdqr type.</p>
<p>Type "discrete" functions have "x_tbl" with columns "x", "prob", "cumprob".
D-functions return a value from "prob" column for input which is very near
(should be equal up to ten digits, defined by <a href='https://rdrr.io/r/base/Round.html'>round(*, digits = 10)</a>) to corresponding value of "x" column. Rounding is done to
account for issues with representation of numerical values (see Note section
of <code><a href='https://rdrr.io/r/base/Comparison.html'>==</a></code>'s help page). For any other input, d-functions return
zero.</p>
<p>Type "continuous" functions have "x_tbl" with columns "x", "y", "cumprob".
D-functions return a value of piecewise-linear function passing through
points that have "x" and "y" coordinates. For any value outside support (i.e.
strictly less than minimum "x" and strictly more than maximum "x") output is
zero.</p>
<p>Column "cumprob" always represents the probability of underlying random
variable being not more than corresponding value in "x" column.</p>
    <h2 class="hasAnchor" id="change-of-metadata"><a class="anchor" href="#change-of-metadata"></a>Change of metadata</h2>

    


<p>All metadata of pdqr-functions are not meant to be changed directly. Also
change of pdqr type, support, and "x_tbl" metadata will lead to a complete
change of underlying distribution.</p>
<p>To change <strong>pdqr class</strong>, for example to convert p-function to d-function,
use <code>as_*()</code> family of functions: <code><a href='as-pdqr.html'>as_p()</a></code>, <code><a href='as-pdqr.html'>as_d()</a></code>, <code><a href='as-pdqr.html'>as_q()</a></code>, <code><a href='as-pdqr.html'>as_r()</a></code>.</p>
<p>To change <strong>pdqr type</strong>, use <code><a href='form_retype.html'>form_retype()</a></code>. It changes underlying
distribution in the most suitable for user way.</p>
<p>To change <strong>pdqr support</strong>, use <code><a href='form_resupport.html'>form_resupport()</a></code> or <code><a href='form_tails.html'>form_tails()</a></code>.</p>
<p>Change of <strong>"x_tbl" metadata</strong> is not possible, because basically it means
creating completely new pdqr-function. To do that, supply data frame with
"x_tbl" format suitable for desired "type" to appropriate <code>new_*()</code> function:
<code><a href='new-pdqr.html'>new_p()</a></code>, <code><a href='new-pdqr.html'>new_d()</a></code>, <code><a href='new-pdqr.html'>new_q()</a></code>, <code><a href='new-pdqr.html'>new_r()</a></code>. Also, there is a <code><a href='form_regrid.html'>form_regrid()</a></code>
function which will increase or decrease granularity of pdqr-function.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='no'>d_unif</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as-pdqr.html'>as_d</a></span>(<span class='no'>dunif</span>)

<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='fu'>meta_all</span>(<span class='no'>d_unif</span>))</div><div class='output co'>#&gt; List of 4
#&gt;  $ class  : chr "d"
#&gt;  $ type   : chr "continuous"
#&gt;  $ support: num [1:2] 0 1
#&gt;  $ x_tbl  :'data.frame':	10001 obs. of  3 variables:
#&gt;   ..$ x      : num [1:10001] 0e+00 1e-04 2e-04 3e-04 4e-04 5e-04 6e-04 7e-04 8e-04 9e-04 ...
#&gt;   ..$ y      : num [1:10001] 1 1 1 1 1 1 1 1 1 1 ...
#&gt;   ..$ cumprob: num [1:10001] 0e+00 1e-04 2e-04 3e-04 4e-04 5e-04 6e-04 7e-04 8e-04 9e-04 ...</div><div class='input'>
<span class='fu'>meta_class</span>(<span class='no'>d_unif</span>)</div><div class='output co'>#&gt; [1] "d"</div><div class='input'><span class='fu'>meta_type</span>(<span class='no'>d_unif</span>)</div><div class='output co'>#&gt; [1] "continuous"</div><div class='input'><span class='fu'>meta_support</span>(<span class='no'>d_unif</span>)</div><div class='output co'>#&gt; [1] 0 1</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='fu'>meta_x_tbl</span>(<span class='no'>d_unif</span>))</div><div class='output co'>#&gt;       x y cumprob
#&gt; 1 0e+00 1   0e+00
#&gt; 2 1e-04 1   1e-04
#&gt; 3 2e-04 1   2e-04
#&gt; 4 3e-04 1   3e-04
#&gt; 5 4e-04 1   4e-04
#&gt; 6 5e-04 1   5e-04</div><div class='input'>
</div></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#pdqr-class">Pdqr class</a></li>
      <li><a href="#pdqr-type">Pdqr type</a></li>
      <li><a href="#pdqr-support">Pdqr support</a></li>
      <li><a href="#-x-tbl-metadata">"x_tbl" metadata</a></li>
      <li><a href="#change-of-metadata">Change of metadata</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



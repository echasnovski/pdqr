<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summarize pair of distributions with distance — summ_distance • pdqr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<meta property="og:title" content="Summarize pair of distributions with distance — summ_distance" />

<meta property="og:description" content="This function computes distance between two distributions represented by
pdqr-functions. Here &quot;distance&quot; is used in a broad sense: a single
non-negative number representing how much two distributions differ from one
another. Bigger values indicate bigger difference. Zero value means that
input distributions are equivalent based on the method used. The notion of
&quot;distance&quot; is useful for doing statistical inference about similarity of two
groups of numbers." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pdqr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pdqr-01-create.html">Create pdqr-functions with `new_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-02-convert.html">Convert pdqr-functions with `as_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-03-transform.html">Transform pdqr-functions with `form_*()` and base operations</a>
    </li>
    <li>
      <a href="../articles/pdqr-04-summarize.html">Summarize pdqr-functions with `summ_*()`</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/pdqr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarize pair of distributions with distance</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/pdqr/blob/master/R/summ_distance.R'><code>R/summ_distance.R</code></a></small>
    <div class="hidden name"><code>summ_distance.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function computes distance between two distributions represented by
pdqr-functions. Here "distance" is used in a broad sense: a single
non-negative number representing how much two distributions differ from one
another. Bigger values indicate bigger difference. Zero value means that
input distributions are equivalent based on the method used. The notion of
"distance" is useful for doing statistical inference about similarity of two
groups of numbers.</p>
    
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>summ_distance</span>(<span class='no'>f</span>, <span class='no'>g</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"KS"</span>)</code></pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>f</th>
      <td><p>A pdqr-function of any <a href='meta.html'>type</a> and
<a href='meta.html'>class</a>.</p></td>
    </tr>
    <tr>
      <th>g</th>
      <td><p>A pdqr-function of any type and class.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Method for computing distance. Should be one of "KS", "totvar",
"compare", "wass", "cramer", "align", "entropy".</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A single non-negative number representing distance between pair of
distributions. For methods "KS", "totvar", and "compare" it is not bigger
than 1.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Methods can be separated into three categories: probability based,
metric based, and entropy based.</p>
<p><strong>Probability based</strong> methods return a number between 0 and 1 which is
computed in the way that mostly based on probability:</p><ul>
<li><p><em>Method "KS"</em> (short for Kolmogorov-Smirnov) computes the supremum of
absolute difference between p-functions corresponding to <code>f</code> and <code>g</code> (<code>|F - G|</code>). Here "supremum" is meant to describe the fact that if input functions
have different <a href='meta.html'>types</a>, there can be no point at which "KS"
distance is achieved. Instead, there might be a sequence of points from left
to right with <code>|F - G|</code> values tending to the result (see Examples).</p></li>
<li><p><em>Method "totvar"</em> (short for "total variation") computes a biggest absolute
difference of probabilities for any subset of real line. In other words,
there is a set of points for "discrete" type and intervals for "continuous",
total probability of which under <code>f</code> and <code>g</code> differs the most. <strong>Note</strong> that
if <code>f</code> and <code>g</code> have different types, output is always 1. The set of interest
consists from all "x" values of "discrete" pdqr-function: probability under
"discrete" distribution is 1 and under "continuous" is 0.</p></li>
<li><p><em>Method "compare"</em> represents a value computed based on probabilities of
one distribution being bigger than the other (see <a href='methods-group-generic.html'>pdqr methods for "Ops" group generic family</a> for more details on comparing
pdqr-functions). It is computed as
<code>2*max(P(F &gt; G), P(F &lt; G)) + 0.5*P(F = G) - 1</code> (here <code>P(F &gt; G)</code> is basically
<code>summ_prob_true(f &gt; g)</code>). This is maximum of two values (<code>P(F &gt; G) + 0.5*P(F = G)</code> and <code>P(F &lt; G) + 0.5*P(F = G)</code>), normalized to return values from 0
to 1. Other way to look at this measure is that it computes (before
normalization) two <a href='summ_roc.html'>ROC AUC</a> values with method <code>"expected"</code>
for two possible ordering (<code>f, g</code>, and <code>g, f</code>) and takes their maximum.</p></li>
</ul>
    <p><strong>Metric based</strong> methods compute "how far" two distributions are apart on the
real line:</p><ul>
<li><p><em>Method "wass"</em> (short for "Wasserstein") computes a 1-Wasserstein
distance: "minimum cost of 'moving' one density into another", or "average
path density point should go while transforming from one into another". It is
computed as integral of <code>|F - G|</code> (absolute difference between p-functions).
If any of <code>f</code> and <code>g</code> has "continuous" type, <code><a href='https://rdrr.io/r/stats/integrate.html'>stats::integrate()</a></code> is used, so
relatively small numerical errors can happen.</p></li>
<li><p><em>Method "cramer"</em> computes Cramer distance: integral of <code>(F - G)^2</code>. This
somewhat relates to "wass" method as <a href='summ_moment.html'>first central absolute moment</a> relates to <a href='summ_spread.html'>variance</a>. Relatively small
numerical errors can happen.</p></li>
<li><p><em>Method "align"</em> computes an absolute value of shift <code>d</code> (possibly
negative) that should be added to <code>f</code> to achieve both <code>P(f+d &gt;= g) &gt;= 0.5</code>
and <code>P(f+d &lt;= g) &gt;= 0.5</code> (in other words, align <code>f+d</code> and <code>g</code>) as close as
reasonably possible. Solution is found numerically with <code><a href='https://rdrr.io/r/stats/uniroot.html'>stats::uniroot()</a></code>,
so relatively small numerical errors can happen. Also <strong>note</strong> that this
method is somewhat slow (compared to all others). To increase speed, use less
elements in <a href='meta.html'>"x_tbl" metadata</a>. For example, with
<code><a href='form_retype.html'>form_retype()</a></code> or smaller <code>n_grid</code> argument in <a href='as-pdqr.html'>as_*()</a> functions.</p></li>
</ul>
    <p><strong>Entropy based</strong> methods compute output based on entropy characteristics:</p><ul>
<li><p><em>Method "entropy"</em> computes sum of two Kullback-Leibler divergences:
<code>KL(f, g) + KL(g, f)</code>, which are outputs of <code><a href='summ_entropy.html'>summ_entropy2()</a></code> with method
"relative". <strong>Notes</strong>:</p><ul>
<li><p>If <code>f</code> and <code>g</code> don't have the same support, distance can be very high.</p></li>
<li><p>Error is thrown if <code>f</code> and <code>g</code> have different types (the same as in
<code><a href='summ_entropy.html'>summ_entropy2()</a></code>).</p></li>
</ul></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='summ_separation.html'>summ_separation()</a></code> for computation of optimal threshold separating
pair of distributions.</p>
<p>Other summary functions: <code><a href='summ_center.html'>summ_center</a></code>,
  <code><a href='summ_classmetric.html'>summ_classmetric</a></code>,
  <code><a href='summ_entropy.html'>summ_entropy</a></code>, <code><a href='summ_hdr.html'>summ_hdr</a></code>,
  <code><a href='summ_interval.html'>summ_interval</a></code>, <code><a href='summ_moment.html'>summ_moment</a></code>,
  <code><a href='summ_order.html'>summ_order</a></code>, <code><a href='summ_prob_true.html'>summ_prob_true</a></code>,
  <code><a href='summ_pval.html'>summ_pval</a></code>, <code><a href='summ_quantile.html'>summ_quantile</a></code>,
  <code><a href='summ_roc.html'>summ_roc</a></code>, <code><a href='summ_separation.html'>summ_separation</a></code>,
  <code><a href='summ_spread.html'>summ_spread</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='no'>d_unif</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as-pdqr.html'>as_d</a></span>(<span class='no'>dunif</span>, <span class='kw'>max</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='no'>d_norm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as-pdqr.html'>as_d</a></span>(<span class='no'>dnorm</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>vapply</a></span>(
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"KS"</span>, <span class='st'>"totvar"</span>, <span class='st'>"compare"</span>, <span class='st'>"wass"</span>, <span class='st'>"cramer"</span>, <span class='st'>"align"</span>, <span class='st'>"entropy"</span>),
  <span class='kw'>function</span>(<span class='no'>meth</span>) {<span class='fu'>summ_distance</span>(<span class='no'>d_unif</span>, <span class='no'>d_norm</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='no'>meth</span>)},
  <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span>(<span class='fl'>1</span>)
)</div><div class='output co'>#&gt;        KS    totvar   compare      wass    cramer     align   entropy 
#&gt; 0.1586546 0.3173092 0.0000000 0.2978750 0.0271365 0.0000000 5.7929318 </div><div class='input'>
<span class='co'># "Supremum" quality of "KS" distance</span>
<span class='no'>d_dis</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='new-pdqr.html'>new_d</a></span>(<span class='fl'>2</span>, <span class='st'>"discrete"</span>)
  <span class='co'># Distance is 1, which is a limit of |F - G| at points which tend to 2 from</span>
  <span class='co'># left</span>
<span class='fu'>summ_distance</span>(<span class='no'>d_dis</span>, <span class='no'>d_unif</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"KS"</span>)</div><div class='output co'>#&gt; [1] 1</div><div class='input'>
</div></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



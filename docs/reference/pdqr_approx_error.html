<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Diagnose pdqr approximation — pdqr_approx_error • pdqr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>

<meta property="og:title" content="Diagnose pdqr approximation — pdqr_approx_error" />
<meta property="og:description" content="pdqr_approx_error() computes errors that are results of 'pdqr'
approximation, which occurs because of possible tail trimming and assuming
piecewise linearity of density function in case of &quot;continuous&quot; type. For an
easy view summary, use summary()." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pdqr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pdqr-01-create.html">Create pdqr-functions with `new_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-02-convert.html">Convert pdqr-functions with `as_*()`</a>
    </li>
    <li>
      <a href="../articles/pdqr-03-transform.html">Transform pdqr-functions with `form_*()` and base operations</a>
    </li>
    <li>
      <a href="../articles/pdqr-04-summarize.html">Summarize pdqr-functions with `summ_*()`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/echasnovski/pdqr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Diagnose pdqr approximation</h1>
    <small class="dont-index">Source: <a href='https://github.com/echasnovski/pdqr/blob/master/R/utils.R'><code>R/utils.R</code></a></small>
    <div class="hidden name"><code>pdqr_approx_error.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>pdqr_approx_error()</code> computes errors that are results of 'pdqr'
approximation, which occurs because of possible tail trimming and assuming
piecewise linearity of density function in case of "continuous" type. For an
easy view summary, use <a href='https://rdrr.io/r/base/summary.html'>summary()</a>.</p>
    </div>

    <pre class="usage"><code class = "r"><span class='fu'>pdqr_approx_error</span><span class='op'>(</span><span class='va'>f</span>, <span class='va'>ref_f</span>, <span class='va'>...</span>, gran <span class='op'>=</span> <span class='fl'>10</span>, remove_infinity <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></code></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>f</th>
      <td><p>A p-, d-, or q-function to diagnose. Usually the output of one of
<code><a href='as_p.html'>as_p()</a></code>, <code><a href='as_p.html'>as_d()</a></code>, or <code><a href='as_p.html'>as_q()</a></code> default methods.</p></td>
    </tr>
    <tr>
      <th>ref_f</th>
      <td><p>A "true" distribution function of the same <a href='meta.html'>class</a>
as <code>f</code>. Usually the input to the aforementioned <code>as_*()</code> function.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments to <code>ref_f</code>. If they were supplied to <code>as_*()</code>
function, then the exact same values must be supplied here.</p></td>
    </tr>
    <tr>
      <th>gran</th>
      <td><p>Degree of grid "granularity" in case of "continuous" type: number
of subintervals to be produced inside every interval of density linearity.
Should be not less than 1 (indicator that original column from
<a href='meta.html'>"x_tbl"</a> will be used, see details).</p></td>
    </tr>
    <tr>
      <th>remove_infinity</th>
      <td><p>Whether to remove rows corresponding to infinite
error.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with the following columns:</p><ul>
<li><p><strong>grid</strong> <code>&lt;dbl&gt;</code> : A grid at which errors are computed.</p></li>
<li><p><strong>error</strong> <code>&lt;dbl&gt;</code> : Errors which are computed as <code>ref_f(grid, ...) - f(grid)</code>.</p></li>
<li><p><strong>abserror</strong> <code>&lt;dbl&gt;</code> : Absolute value of "error" column.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Errors are computed as difference between "true" value (output of
<code>ref_f</code>) and output of pdqr-function <code>f</code>. They are computed at "granulated"
<code>gran</code> times grid (which is an "x" column of "x_tbl" in case <code>f</code> is p- or
d-function and "cumprob" column if q-function). They are usually negative
because of possible tail trimming of reference distribution.</p>
<p><strong>Notes</strong>:</p><ul>
<li><p><code>gran</code> argument for "discrete" type is always 1.</p></li>
<li><p>Quantile pdqr approximation of "discrete" distribution with infinite
tale(s) can result into "all one" summary of error. This is expected output
and is because test grid is chosen to be quantiles of pdqr-distribution which
due to renormalization can differ by one from reference ones. For example:
<code><a href='https://rdrr.io/r/base/summary.html'>summary(pdqr_approx_error(as_p(ppois, lambda = 10), ppois, lambda = 10))</a></code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='enpoint.html'>enpoint()</a></code> for representing pdqr-function as a set of points with
desirable number of rows.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><code class = "r"><div class='input'><span class='va'>d_norm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='as_p.html'>as_d</a></span><span class='op'>(</span><span class='va'>dnorm</span><span class='op'>)</span>
<span class='va'>error_norm</span> <span class='op'>&lt;-</span> <span class='fu'>pdqr_approx_error</span><span class='op'>(</span><span class='va'>d_norm</span>, <span class='va'>dnorm</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>error_norm</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       grid            error               abserror        
#&gt;  Min.   :-4.753   Min.   :-7.979e-07   Min.   :9.900e-12  
#&gt;  1st Qu.:-2.377   1st Qu.:-4.000e-07   1st Qu.:1.975e-09  
#&gt;  Median : 0.000   Median :-5.552e-08   Median :5.552e-08  
#&gt;  Mean   : 0.000   Mean   :-2.104e-07   Mean   :2.104e-07  
#&gt;  3rd Qu.: 2.377   3rd Qu.:-1.975e-09   3rd Qu.:4.000e-07  
#&gt;  Max.   : 4.753   Max.   :-9.900e-12   Max.   :7.979e-07  </div><div class='input'>
<span class='co'># Setting `gran` results into different number of rows in output</span>
<span class='va'>error_norm_2</span> <span class='op'>&lt;-</span> <span class='fu'>pdqr_approx_error</span><span class='op'>(</span><span class='va'>d_norm</span>, <span class='va'>dnorm</span>, gran <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='fu'><a href='meta.html'>meta_x_tbl</a></span><span class='op'>(</span><span class='va'>d_norm</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>error_norm_2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># By default infinity errors are removed</span>
<span class='va'>d_beta</span> <span class='op'>&lt;-</span> <span class='fu'><a href='as_p.html'>as_d</a></span><span class='op'>(</span><span class='va'>dbeta</span>, shape1 <span class='op'>=</span> <span class='fl'>0.3</span>, shape2 <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span>
<span class='va'>error_beta_1</span> <span class='op'>&lt;-</span> <span class='fu'>pdqr_approx_error</span><span class='op'>(</span><span class='va'>d_beta</span>, <span class='va'>dbeta</span>, shape1 <span class='op'>=</span> <span class='fl'>0.3</span>, shape2 <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>error_beta_1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       grid             error             abserror       
#&gt;  Min.   :0.00001   Min.   :-13.9547   Min.   :  0.0167  
#&gt;  1st Qu.:0.25000   1st Qu.: -0.0278   1st Qu.:  0.0174  
#&gt;  Median :0.50000   Median : -0.0199   Median :  0.0199  
#&gt;  Mean   :0.50000   Mean   : -0.0215   Mean   :  0.0470  
#&gt;  3rd Qu.:0.74999   3rd Qu.: -0.0174   3rd Qu.:  0.0278  
#&gt;  Max.   :0.99999   Max.   :587.9396   Max.   :587.9396  </div><div class='input'>
<span class='co'># To not remove them, set `remove_infinity` to `FALSE`</span>
<span class='va'>error_beta_2</span> <span class='op'>&lt;-</span> <span class='fu'>pdqr_approx_error</span><span class='op'>(</span>
  <span class='va'>d_beta</span>, <span class='va'>dbeta</span>, shape1 <span class='op'>=</span> <span class='fl'>0.3</span>, shape2 <span class='op'>=</span> <span class='fl'>0.7</span>, remove_infinity <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>error_beta_2</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       grid          error              abserror      
#&gt;  Min.   :0.00   Min.   :-13.95467   Min.   :0.01671  
#&gt;  1st Qu.:0.25   1st Qu.: -0.02783   1st Qu.:0.01736  
#&gt;  Median :0.50   Median : -0.01987   Median :0.01987  
#&gt;  Mean   :0.50   Mean   :      Inf   Mean   :    Inf  
#&gt;  3rd Qu.:0.75   3rd Qu.: -0.01736   3rd Qu.:0.02784  
#&gt;  Max.   :1.00   Max.   :      Inf   Max.   :    Inf  </div></code></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


